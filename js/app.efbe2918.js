(function(e){function t(t){for(var i,s,c=t[0],o=t[1],u=t[2],f=0,h=[];f<c.length;f++)s=c[f],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&h.push(a[s][0]),a[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);l&&l(t);while(h.length)h.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],i=!0,c=1;c<r.length;c++){var o=r[c];0!==a[o]&&(i=!1)}i&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var i={},a={app:0},n=[];function s(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=i,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(r,i,function(t){return e[t]}.bind(null,i));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/Artyom-Pogosov-27-1-21/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=o;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},5298:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("AppHeader"),r("router-view")],1)},n=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("nav",{staticClass:"header"},[r("div",{staticClass:"logo"},[e._v("Herolo Weather Task")]),r("div",{staticClass:"main-nav"},[r("router-link",{attrs:{to:"/"}},[e._v("Home")]),r("router-link",{attrs:{to:"/favorites"}},[e._v("Favorites ")]),r("div",{staticClass:"temperture-unit"},[r("span",{class:{"selected-temperture-unit":"celsius"===e.tempertureUnit},on:{click:function(t){return e.updateTempertureUnit("celsius")}}},[e._v("°C")]),e._v(" | "),r("span",{class:{"selected-temperture-unit":"fahrenheit"===e.tempertureUnit},on:{click:function(t){return e.updateTempertureUnit("fahrenheit")}}},[e._v("°F")])]),r("div",{staticClass:"dark-mode"},[r("el-switch",{attrs:{"active-color":"#f7f7f7","inactive-color":"#cacac9","aria-label":"Toggle themes","active-value":"100","inactive-value":"0"},on:{change:e.toggleTheme},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),r("span",[e._v(e._s(e.taggleText))])],1)],1)])])},c=[],o=r("5530"),u=r("2f62"),l={data:function(){return{value:"0",theme:""}},mounted:function(){var e=localStorage.getItem("theme");this.value="darkMode"===e?"100":"0",this.toggleTheme(),document.documentElement.setAttribute("data-theme",e)},methods:Object(o["a"])(Object(o["a"])({},Object(u["d"])({setTempertureUnit:"setTempertureUnit"})),{},{toggleTheme:function(){this.theme="darkMode"==this.theme?"":"darkMode",document.documentElement.setAttribute("data-theme",this.theme),localStorage.setItem("theme",this.theme)},updateTempertureUnit:function(e){this.setTempertureUnit(e)}}),computed:Object(o["a"])(Object(o["a"])({},Object(u["c"])({tempertureUnit:"tempertureUnit"})),{},{taggleText:function(){return"0"===this.value?"Light Moode":"Dark Moode"}})},f=l,h=r("2877"),m=Object(h["a"])(f,s,c,!1,null,null,null),v=m.exports,p={components:{AppHeader:v}},d=p,y=(r("5c0b"),Object(h["a"])(d,a,n,!1,null,null,null)),C=y.exports,b=r("8c4f"),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.dailyForecasts.length>0?r("div",{staticClass:"home"},[r("div",{staticClass:"search"},[r("CitySearchInput",{on:{cityForecasts:e.loadCityForecasts}})],1),r("div",{staticClass:"top-container"},[r("ForecastMainCard",{attrs:{currCity:e.currCity,forecast:e.dailyForecasts[0]}}),r("div",{staticClass:"favorite-container"},[r("el-button",{attrs:{type:"primary",icon:e.favoriteBtn.icon},on:{click:e.handleFavorite}},[e._v(e._s(e.favoriteBtn.text))]),e.isCityFavorite?r("div",[r("i",{staticClass:"el-icon-star-on"}),e._v("Favorite")]):e._e()],1)],1),r("h1",[e._v(e._s(e.dailyForecasts[0].Day.IconPhrase))]),r("ForecastsList",{attrs:{dailyForecasts:e.dailyForecasts}})],1):e._e()},O=[],F=(r("4160"),r("159b"),r("96cf"),r("1da1")),j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-input"},[r("el-input",{attrs:{placeholder:"Search","prefix-icon":"el-icon-search"},on:{input:e.searchCity},nativeOn:{keydown:function(t){return e.checkLang(t)}},model:{value:e.searchStr,callback:function(t){e.searchStr=t},expression:"searchStr"}}),0!==this.searchStr.length?r("div",{staticClass:"result-container"},e._l(e.citySearchResult.slice(0,5),(function(t){return r("p",{key:t.id,on:{click:function(r){return e.hendleCity(t)}}},[e._v(" "+e._s(t.LocalizedName)+", "+e._s(t.Country.LocalizedName)+" ")])})),0):e._e()],1)},_=[],w=(r("ac1f"),r("466d"),{name:"CitySearchInput",data:function(){return{searchStr:""}},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(u["b"])({getCity:"getCity"})),Object(u["d"])({resetCitySearchResult:"resetCitySearchResult"})),{},{searchCity:function(){var e=this;return Object(F["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.searchStr.length){t.next=2;break}return t.abrupt("return",e.resetCitySearchResult());case 2:return t.next=4,e.getCity(e.searchStr);case 4:case"end":return t.stop()}}),t)})))()},hendleCity:function(e){this.searchStr="",this.$emit("cityForecasts",e)},checkLang:function(e){var t=/^[A-Za-z]+$/;e.key.match(t)||(e.preventDefault(),this.$message.error({message:"Oops, Searching should be done in English letters only.",duration:1500}))}}),computed:Object(o["a"])({},Object(u["c"])({citySearchResult:"citySearchResult"}))}),x=w,k=Object(h["a"])(x,j,_,!1,null,null,null),S=k.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"cards-container"},e._l(e.dailyForecasts,(function(e,t){return r("ForecastPreview",{key:t,attrs:{forecast:e}})})),1)},W=[],T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"card"},[r("el-card",[r("div",{staticClass:"clearfix"},[r("h1",[e._v(e._s(e.day))])]),r("div",{staticClass:"img"},[r("img",{attrs:{src:"https://www.accuweather.com/images/weathericons/"+e.forecast.Day.Icon+".svg"}})]),r("div",{staticClass:"card-temperture"},[e._v(" "+e._s(e.temperture.min)+" - "+e._s(e.temperture.max)+" "+e._s(e.temperture.symbol)+" ")])])],1)},U=[];r("fb6a"),r("d3b7"),r("25f0"),r("b680");function I(e){return(5*(e-32)/9).toFixed(0)}var $={props:["forecast"],computed:Object(o["a"])(Object(o["a"])({},Object(u["c"])({tempertureUnit:"tempertureUnit"})),{},{day:function(){var e=new Date(1e3*this.forecast.EpochDate),t=e.toString().slice(0,3);return t},temperture:function(){var e=this.forecast.Temperature.Minimum.Value,t=this.forecast.Temperature.Maximum.Value;return"fahrenheit"===this.tempertureUnit?{min:e,max:t,symbol:"°F"}:{min:I(e),max:I(t),symbol:"°C"}}})},M=$,P=Object(h["a"])(M,T,U,!1,null,null,null),E=P.exports,N={name:"ForecastsList",props:{dailyForecasts:{type:Array}},components:{ForecastPreview:E}},K=N,A=Object(h["a"])(K,R,W,!1,null,null,null),L=A.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"today-forecast"},[r("img",{attrs:{src:"https://www.accuweather.com/images/weathericons/"+e.forecast.Day.Icon+".svg"}}),r("div",[r("h1",{staticClass:"city"},[e._v(e._s(e.currCity.LocalizedName))]),r("div",{staticClass:"card-temperture"},[e._v(" "+e._s(e.temperture.min)+" - "+e._s(e.temperture.max)+" "+e._s(e.temperture.symbol)+" ")])])])])},G=[],H={props:["forecast","currCity"],computed:Object(o["a"])(Object(o["a"])({},Object(u["c"])({tempertureUnit:"tempertureUnit"})),{},{temperture:function(){var e=this.forecast.Temperature.Minimum.Value,t=this.forecast.Temperature.Maximum.Value;return"fahrenheit"===this.tempertureUnit?{min:e,max:t,symbol:"°F"}:{min:I(e),max:I(t),symbol:"°C"}}})},J=H,V=Object(h["a"])(J,D,G,!1,null,null,null),z=V.exports;function q(){var e=function(){return new Promise((function(e,t){window.navigator.geolocation.getCurrentPosition((function(t){var r={lat:t.coords.latitude,lon:t.coords.longitude};e(r)}),(function(e){return t(e)}))}))};return e()}var B=r("5c96"),Z=r.n(B),Q={name:"Home",components:{CitySearchInput:S,ForecastsList:L,ForecastMainCard:z},created:function(){var e=this;return Object(F["a"])(regeneratorRuntime.mark((function t(){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.currCity.Key){t.next=2;break}return t.abrupt("return");case 2:return r=B["Loading"].service({fullscreen:!0}),t.prev=3,t.next=6,q();case 6:return i=t.sent,t.next=9,e.getGeoposition(i);case 9:e.checkIfCityIsFavorite(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),e.$message.error("".concat(t.t0));case 15:return t.prev=15,e.$nextTick((function(){r.close()})),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,12,15,18]])})))()},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(u["b"])({getCityForecasts:"getCityForecasts",getGeoposition:"getGeoposition"})),Object(u["d"])({setCurrCity:"setCurrCity",setFavoritesCities:"setFavoritesCities",removeFavoritesCities:"removeFavoritesCities"})),{},{loadCityForecasts:function(e){this.setCurrCity(e),this.getCityForecasts(e.Key),this.checkIfCityIsFavorite()},handleFavorite:function(){var e=this.currCity.isCityFavorite?"Removed successfully":"Added successfully";this.currCity.isCityFavorite?this.removeFavoritesCities():this.setFavoritesCities(),this.sendNotification(e)},checkIfCityIsFavorite:function(){var e=this;this.favoritesCities.forEach((function(t){if(t.Key===e.currCity.Key)return e.isCityFavorite=!0}))},sendNotification:function(e){this.$notify({title:"Success",message:e,type:"success"})}}),computed:Object(o["a"])(Object(o["a"])({},Object(u["c"])({dailyForecasts:"dailyForecasts",currCity:"currCity",favoritesCities:"favoritesCities"})),{},{favoriteBtn:function(){return{text:this.isCityFavorite?"Remove from favorites":"Add to favorites",icon:this.isCityFavorite?"el-icon-remove":"el-icon-circle-plus"}},isCityFavorite:function(){return this.currCity.isCityFavorite}})},X=Q,Y=Object(h["a"])(X,g,O,!1,null,null,null),ee=Y.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"favorities"},[r("div",{staticClass:"cards-container"},e._l(e.favoritesCities,(function(t,i){return r("WeatherCityPreview",{key:i,attrs:{cityCurrWeather:t},on:{setNewCity:e.setNewCity}})})),1)])},re=[],ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"card",on:{click:e.getFullCityForecast}},[e.cityCurrWeather.currWeather?r("el-card",[r("div",{staticClass:"clearfix"},[r("h1",[e._v(" "+e._s(e.cityCurrWeather.LocalizedName)+", "+e._s(e.cityCurrWeather.Country.ID)+" ")]),r("h5",[e._v(e._s(e.cityCurrWeather.Key))]),r("p",[e._v(" "+e._s(e.cityCurrWeather.currWeather.WeatherText)+" ")])]),r("div",{staticClass:"img"},[r("img",{attrs:{src:"https://www.accuweather.com/images/weathericons/"+e.cityCurrWeather.currWeather.WeatherIcon+".svg"}})]),r("div",{staticClass:"card-temperture"},[r("span",[e._v(e._s(e.temperture.value)+" "+e._s(e.temperture.symbol))])])]):e._e()],1)},ae=[],ne={props:["cityCurrWeather"],data:function(){return{unit:"Metric",symbol:{Imperial:"°F",Metric:"°C"}}},computed:Object(o["a"])(Object(o["a"])({},Object(u["c"])({tempertureUnit:"tempertureUnit"})),{},{temperture:function(){var e=this.cityCurrWeather.currWeather.ApparentTemperature,t="fahrenheit"===this.tempertureUnit?"Imperial":"Metric";return{value:e[t].Value,symbol:this.symbol[t]}}}),methods:{getFullCityForecast:function(){this.$emit("setNewCity",this.cityCurrWeather)}}},se=ne,ce=Object(h["a"])(se,ie,ae,!1,null,null,null),oe=ce.exports,ue={name:"Favorities",components:{WeatherCityPreview:oe},created:function(){var e=this;return Object(F["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=B["Loading"].service({fullscreen:!0}),t.prev=1,t.next=4,e.getFavoritesCitiesWeather();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),e.$message.error("".concat(t.t0));case 9:return t.prev=9,e.$nextTick((function(){r.close()})),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[1,6,9,12]])})))()},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(u["b"])({getFavoritesCitiesWeather:"getFavoritesCitiesWeather"})),Object(u["d"])({setCurrCity:"setCurrCity"})),{},{setNewCity:function(e){this.setCurrCity(e),this.$router.push("/")}}),computed:Object(o["a"])({},Object(u["c"])({favoritesCities:"favoritesCities"}))},le=ue,fe=Object(h["a"])(le,te,re,!1,null,null,null),he=fe.exports;i["default"].use(b["a"]);var me=[{path:"/",name:"Home",component:ee},{path:"/favorites",name:"Favorites",component:he}],ve=new b["a"]({routes:me}),pe=ve,de=(r("99af"),r("c740"),r("d81d"),r("a434"),r("3ca3"),r("ddb0"),r("2909")),ye=r("bc3a"),Ce=r.n(ye);function be(e){var t=localStorage.getItem(e),r=JSON.parse(t);return r}function ge(e,t){var r=JSON.stringify(t);localStorage.setItem(e,r)}var Oe={load:be,store:ge};Ce.a.defaults.headers.common["Access-Control-Allow-Origin"]="https://artyomp1.github.io/",i["default"].use(u["a"]);var Fe="https://dataservice.accuweather.com",je="KiOcbprG5qGff57LWAogGVCNaCU7blhK",_e=new u["a"].Store({state:{dailyForecasts:[],currCity:{},favoritesCities:[],citySearchResult:[],tempertureUnit:"fahrenheit"},getters:{dailyForecasts:function(e){return e.dailyForecasts},currCity:function(e){return e.currCity},favoritesCities:function(e){return e.favoritesCities},citySearchResult:function(e){return e.citySearchResult},tempertureUnit:function(e){return e.tempertureUnit}},mutations:{setDailyForecasts:function(e,t){var r=t.dailyForecasts;e.dailyForecasts=r},setFavoritesCitiesWeathert:function(e,t){var r=JSON.parse(JSON.stringify(e.favoritesCities)),i=r.map((function(e,r){var i=Object(o["a"])(Object(o["a"])({},e),{},{currWeather:t[r].data[0]});return i}));e.favoritesCities=Object(de["a"])(i),Oe.store("favoritesCitiesCurrWeather",e.favoritesCities)},setCitySearchResult:function(e,t){var r=t.citySearchResult;e.citySearchResult=r},resetCitySearchResult:function(e){e.citySearchResult=[]},setFavoritesCities:function(e){var t=e.favoritesCities.findIndex((function(t){return t.key===e.currCity.Key}));-1===t&&(e.currCity=Object(o["a"])(Object(o["a"])({},e.currCity),{},{isCityFavorite:!0})),e.favoritesCities=[].concat(Object(de["a"])(e.favoritesCities),[e.currCity])},removeFavoritesCities:function(e){e.currCity=Object(o["a"])(Object(o["a"])({},e.currCity),{},{isCityFavorite:!1});var t=e.favoritesCities.findIndex((function(t){return t.Key===e.currCity.Key}));e.favoritesCities.splice(t,1)},setCurrCity:function(e,t){t.isCityFavorite=!1,e.favoritesCities.forEach((function(e){if(e.Key===t.Key)return t=Object(o["a"])(Object(o["a"])({},t),{},{isCityFavorite:!0})})),e.currCity=Object(o["a"])({},t)},setTempertureUnit:function(e,t){e.tempertureUnit=t}},actions:{getCityForecasts:function(e,t){return Object(F["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Ce.a.get("".concat(Fe,"/forecasts/v1/daily/5day/").concat(t,"?apikey=").concat(je));case 2:i=r.sent,i=i.data,e.commit({type:"setDailyForecasts",dailyForecasts:i.DailyForecasts});case 5:case"end":return r.stop()}}),r)})))()},getGeoposition:function(e,t){return Object(F["a"])(regeneratorRuntime.mark((function r(){var i,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=t.lat?t:{lat:32.0798667,lon:34.7851156},r.next=3,Ce.a.get("".concat(Fe,"/locations/v1/cities/geoposition/search?apikey=").concat(je,"&q=").concat(i.lat,"%2C").concat(i.lon));case 3:a=r.sent,e.commit("setCurrCity",a.data),e.dispatch("getCityForecasts",a.data.Key);case 6:case"end":return r.stop()}}),r)})))()},getFavoritesCitiesWeather:function(e){return Object(F["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.getters.favoritesCities.map((function(e){return Ce.a.get("".concat(Fe,"/currentconditions/v1/").concat(e.Key,"?apikey=").concat(je,"&details=true"))})));case 2:r=t.sent,e.commit("setFavoritesCitiesWeathert",r);case 4:case"end":return t.stop()}}),t)})))()},getCity:function(e,t){return Object(F["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Ce.a.get("".concat(Fe,"/locations/v1/cities/autocomplete?apikey=").concat(je,"&q=").concat(t));case 2:i=r.sent,i=i.data,e.commit({type:"setCitySearchResult",citySearchResult:i});case 5:case"end":return r.stop()}}),r)})))()}},modules:{}}),we=(r("0fae"),r("b2d6")),xe=r.n(we);r("5298");i["default"].config.productionTip=!1,i["default"].use(Z.a,{locale:xe.a}),new i["default"]({router:pe,store:_e,render:function(e){return e(C)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";r("9c0c")},"9c0c":function(e,t,r){}});
//# sourceMappingURL=app.efbe2918.js.map